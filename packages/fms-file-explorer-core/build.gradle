plugins {
    id "com.dorongold.task-tree" version "1.3.1"
    id "com.moowork.node" version "1.2.0"
}

wrapper {
    gradleVersion "5.6.2"
    distributionType Wrapper.DistributionType.BIN
}

node {
    version = "10.16.3"
    npmVersion = "6.11.3"
    download = true
    nodeModulesDir = file("${project.projectDir}")
}

ext {
    npmBin = "${projectDir}/node_modules/.bin"
}

task clean(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "clean"]
}

task format(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "format"]
}

task generateTypes(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "generateTypes"]
}

task lint(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "lint"]
}

task test(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "test"]
}

task typeCheck(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "typeCheck"]
}

///////////////////////////
// Build
//////////////////////////
task transpile(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "transpile"]
}

task build(type: NpmTask) {
    dependsOn npmInstall

    args = ["run", "build"]
}
